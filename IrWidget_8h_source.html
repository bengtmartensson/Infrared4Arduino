<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Infrared4Arduino: src/IrWidget.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Infrared4Arduino
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IrWidget.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="IrWidget_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* IR Widget: capture a raw IR signal and dump the timing of the non-demodulated signal</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">http://www.piclist.com/images/boards/irwidget/index.htm</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">http://www.hifi-remote.com/forums/dload.php?action=file&amp;file_id=2044</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">http://www.hifi-remote.com/wiki/index.php?title=IR_Scope_and_IR_Widget_User%27s_Guide</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">http://www.compendiumarcana.com/irwidget/</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Arduino digital pin numbers for the input capture pin (ICP) and the logic analyzer debugging pin (LA Dbg):</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">Board name / MCU                           | ICP pin                  | LA Dbg pin</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">-------------------------------------------|--------------.-----------|------------------------</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">Duemilanove/Uno (ATmega328P / ATmega168)   | ICP1/PB0, Arduino pin 8  | PD6, Arduino pin 6</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">Leonardo (ATmega32U4)                      | ICP1/PD4, Arduino pin 4  | PD6, Arduino pin 12</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Arduino Mega 2560 (ATmega2560)             | ICP4/PL0, Arduino pin 49 | PL6, Arduino pin 43</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">see also here:</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">http://arduino.cc/en/Hacking/PinMapping168 (also for ATmega328P)</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">http://arduino.cc/en/Hacking/PinMapping32u4</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">http://arduino.cc/en/Hacking/PinMapping2560</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Copyright (c) 2012 Michael Dreher  &lt;michael(at)5dot1.de&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// this code may be distributed under the terms of the General Public License V2 (GPL V2)</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Code slighty reorganized by Bengt Martensson</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//#define ALTERNATE_PIN</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;Arduino.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IrReader_8h.html">IrReader.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Board_8h.html">Board.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a5f542e023817b1ae8e5c7705c27d7494">   33</a></span>&#160;<span class="preprocessor">#define ENABLE_PULL_UP</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//#define DEBUG_PORT D</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//#define DEBUG_PIN 6</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//#define DEBUG_PORT L</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a6278e06f908be1d32b66d7ff6108a5ee">   38</a></span>&#160;<span class="preprocessor">#define USE_PRESCALER_FACTOR_8 1</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classIrWidget.html">   44</a></span>&#160;<span class="keyword">class </span><a class="code" href="classIrWidget.html">IrWidget</a> : <span class="keyword">public</span> <a class="code" href="classIrReader.html">IrReader</a> {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classIrWidget.html#a0d01530870632c70b8f849898c5a6fb6">   46</a></span>&#160;    <span class="keyword">static</span> constexpr int16_t <a class="code" href="classIrWidget.html#a0d01530870632c70b8f849898c5a6fb6">defaultMarkExcess</a> = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classIrWidget.html#a58943ced28becf9321b930854928d69c">   49</a></span>&#160;    <a class="code" href="InfraredTypes_8h.html#ab35ca91fa7f5b34afafe58828ccf58db">frequency_t</a> <a class="code" href="classIrWidget.html#a58943ced28becf9321b930854928d69c">frequency</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classIrWidget.html#a399814d6fa81bdb4bbb0a5991a9e2b3a">   51</a></span>&#160;    <a class="code" href="classIrWidget.html#a399814d6fa81bdb4bbb0a5991a9e2b3a">IrWidget</a>(<span class="keywordtype">size_t</span> captureLength = <a class="code" href="classIrReader.html#a4810d1c2d4151e306446889bbaed955d">defaultCaptureLength</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <span class="keywordtype">bool</span> pullup = <span class="keyword">false</span>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            int16_t <a class="code" href="classIrReader.html#a5ed55a23db0dd9ae2f6ccfe107802e54">markExcess</a> = <a class="code" href="classIrWidget.html#a0d01530870632c70b8f849898c5a6fb6">defaultMarkExcess</a>,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <a class="code" href="InfraredTypes_8h.html#ace35cfd2245c700198afb856211d7bcd">milliseconds_t</a> <a class="code" href="classIrReader.html#a6e59cf708a5d470e928b09ed19bd9744">beginningTimeout</a> = <a class="code" href="classIrReader.html#ab048b0b98a743fb15efd19261b9a9dde">defaultBeginningTimeout</a>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="InfraredTypes_8h.html#ace35cfd2245c700198afb856211d7bcd">milliseconds_t</a> <a class="code" href="classIrWidget.html#ae391c1ef6f89a4bdaa88ad86e695705a">endingTimeout</a> = <a class="code" href="classIrReader.html#aa347d7724edfacca143a1d5b2e99b7cc">defaultEndingTimeout</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classIrWidget.html#aacd912c2cb3b959886a52fb0280a54a8">   56</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classIrWidget.html#aacd912c2cb3b959886a52fb0280a54a8">~IrWidget</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classIrWidget.html#a5c8198e8ffc290c8cc9b020f0362fc89">   63</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIrWidget.html#a5c8198e8ffc290c8cc9b020f0362fc89">invertingSensor</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classIrWidget.html#a615b8fb0466161aaf14f94cd89a85946">   65</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#a615b8fb0466161aaf14f94cd89a85946">capture</a>() = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classIrWidget.html#ad05e90c6f30a7a8073a2a6042189bd15">   70</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#ad05e90c6f30a7a8073a2a6042189bd15">receive</a>() {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="classIrWidget.html#a615b8fb0466161aaf14f94cd89a85946">capture</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classIrWidget.html#af6cd89de970e6476d50e33965d91d575">   74</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classIrWidget.html#af6cd89de970e6476d50e33965d91d575">getDataLength</a>()<span class="keyword"> const </span>{ <span class="comment">// was: getCaptureCount()</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classIrWidget.html#a3ee5421476060a892ca845db0a8264e0">captureCount</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classIrWidget.html#a78328d308ce6ff122810c96060d77fa6">   78</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classIrWidget.html#a78328d308ce6ff122810c96060d77fa6">isReady</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classIrReader.html#aeafc4ae8ffe780bc0d8543d8c86db50d">timeouted</a> || !<a class="code" href="classIrReader.html#acb87b34a742322ab3202ab41a4a6945d">isEmpty</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classIrWidget.html#a09ca5209cface3e0121609b5c957a545">   82</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#a09ca5209cface3e0121609b5c957a545">reset</a>() {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classIrWidget.html#a3ee5421476060a892ca845db0a8264e0">captureCount</a> = 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classIrWidget.html#ac218cea65ffcbc5867f6c34d66d40259">   86</a></span>&#160;    <a class="code" href="InfraredTypes_8h.html#a5a4323547cf58895464e841b9b424384">microseconds_t</a> <span class="keyword">inline</span> <a class="code" href="classIrWidget.html#ac218cea65ffcbc5867f6c34d66d40259">getDuration</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        uint32_t result32 = <a class="code" href="classIrWidget.html#a8b09fff5460ce629ebd40f363d2450fd">timerValueToNanoSeconds</a>(<a class="code" href="classIrWidget.html#aca3ef24d4335c14f359183b043823d49">unpackTimeVal</a>(<a class="code" href="classIrWidget.html#a1cafd808cd50961ea5aae15f8578bb10">captureData</a>[i])) / 1000</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                            + (i &amp; 1 ? <a class="code" href="classIrReader.html#a5ed55a23db0dd9ae2f6ccfe107802e54">markExcess</a> : -<a class="code" href="classIrReader.html#a5ed55a23db0dd9ae2f6ccfe107802e54">markExcess</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> result32 &lt;= <a class="code" href="InfraredTypes_8h.html#a02e5a587d9560b431c944b1f71cdb898">MICROSECONDS_T_MAX</a> ? (<a class="code" href="InfraredTypes_8h.html#a5a4323547cf58895464e841b9b424384">microseconds_t</a>) result32 : <a class="code" href="InfraredTypes_8h.html#a02e5a587d9560b431c944b1f71cdb898">MICROSECONDS_T_MAX</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classIrWidget.html#a6fd29fbdb2188444cc75e142045c85d5">   97</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#a6fd29fbdb2188444cc75e142045c85d5">setEndingTimeout</a>(<a class="code" href="InfraredTypes_8h.html#ace35cfd2245c700198afb856211d7bcd">milliseconds_t</a> timeout);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classIrWidget.html#ae8b636dfda0fcdea0fb2b8d3879e345e">   99</a></span>&#160;    <a class="code" href="InfraredTypes_8h.html#ace35cfd2245c700198afb856211d7bcd">milliseconds_t</a> <a class="code" href="classIrWidget.html#ae8b636dfda0fcdea0fb2b8d3879e345e">getEndingTimeout</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classIrWidget.html#a47d27f3b458e0e95d0887b4beb9b199f">  101</a></span>&#160;    <a class="code" href="InfraredTypes_8h.html#ab35ca91fa7f5b34afafe58828ccf58db">frequency_t</a> <a class="code" href="classIrWidget.html#a47d27f3b458e0e95d0887b4beb9b199f">getFrequency</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classIrWidget.html#a58943ced28becf9321b930854928d69c">frequency</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classIrWidget.html#aa8bb29845ad2933c1c957d1f088f3835">  105</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#aa8bb29845ad2933c1c957d1f088f3835">dump</a>(Stream &amp;stream) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">void</span> setup(<span class="keywordtype">bool</span> setup);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Internal defines, don&#39;t change</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#if USE_PRESCALER_FACTOR_8</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a9f370fb896e33dec84d8007855d290aa">  116</a></span>&#160;<span class="preprocessor">#define CAPTURE_PRESCALER_SETTING (_BV(CAT3(CS, CAP_TIM, 1)))</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a1d3a98b2b25a58303852835b74d28a64">  117</a></span>&#160;<span class="preprocessor">#define CAPTURE_PRESCALER_BITS (3)</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#define CAPTURE_PRESCALER_SETTING (_BV(CAT3(CS, CAP_TIM, 0)))</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#define CAPTURE_PRESCALER_BITS (0)</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a49d47449ce09966c52ba5197725d05ec">  122</a></span>&#160;<span class="preprocessor">#define CAPTURE_PRESCALER_FACTOR (_BV(CAPTURE_PRESCALER_BITS))</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#if RANGE_EXTENSION_BITS &gt; 8</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">typedef</span> uint16_t <a class="code" href="classIrWidget.html#a4afe9486ef7f21d095be040f68c50cd4">ovlBitsDataType</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classIrWidget.html#a4afe9486ef7f21d095be040f68c50cd4">  127</a></span>&#160;    <span class="keyword">typedef</span> uint8_t <a class="code" href="classIrWidget.html#a4afe9486ef7f21d095be040f68c50cd4">ovlBitsDataType</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classIrWidget.html#a9559347546a5553a42ed99cd776f1c17">  130</a></span>&#160;    <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classIrWidget.html#a9559347546a5553a42ed99cd776f1c17">RANGE_EXTENSION_BITS</a> = 4; <span class="comment">// factor for upper measurement range = 2^(RANGE_EXTENSION_BITS+1)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classIrWidget.html#ae391c1ef6f89a4bdaa88ad86e695705a">  132</a></span>&#160;    <a class="code" href="classIrWidget.html#a4afe9486ef7f21d095be040f68c50cd4">ovlBitsDataType</a> <a class="code" href="classIrWidget.html#ae391c1ef6f89a4bdaa88ad86e695705a">endingTimeout</a>; <span class="comment">// = _BV(RANGE_EXTENSION_BITS) - 1;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// Adaption to different MCUs and clk values</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span><span class="preprocessor">#if defined(_AVR_IOM32U4_H_)</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#ifndef ALTERNATE_PIN</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// Digital pin 4, ICP1</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#define CAP_PORT D</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#define CAP_PIN 4</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#define CAP_TIM 1</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#define CAP_TIM_OC A</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#else // Alternate pin</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// Digital pin 13, ICP3</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#define CAP_PORT C</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#define CAP_PIN 7</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#define CAP_TIM 3</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#define CAP_TIM_OC A</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif // ALTERNATE_PIN</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#elif defined(_AVR_IOM2560_H_)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#ifndef ALTERNATE_PIN</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// Digital pin 49, ICP4</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#define CAP_PORT L</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#define CAP_PIN 0</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#define CAP_TIM 4</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#define CAP_TIM_OC A</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#else // ALTERNATE_PIN</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Digital pin 48, ICP5</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#define CAP_PORT L</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#define CAP_PIN 1</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#define CAP_TIM 5</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#define CAP_TIM_OC A</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#endif // ALTERNATE_PIN</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// the default is the setting for the ATmega328P / ATmega168</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// Digital pin 8, ICP1</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a296a623d699c22d8a25fde299de38b09">  169</a></span>&#160;<span class="preprocessor">#define CAP_PORT B</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#aa708958e8a6b7ca8af16f75f19800fb8">  170</a></span>&#160;<span class="preprocessor">#define CAP_PIN 0</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a0403d95babf139dd2affe9ce18347c73">  171</a></span>&#160;<span class="preprocessor">#define CAP_TIM 1</span></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a8fdb771163898edef9cb84c2b3531621">  172</a></span>&#160;<span class="preprocessor">#define CAP_TIM_OC A</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// Helper macros</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#ae70baf5399951da1e7ad45a0ed890832">  178</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define cbi(sfr, bit) (_SFR_BYTE(sfr) &amp;= ~_BV(bit)) // clear bit</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#ac4a5536d9bf092116f88b94797ddc882">  179</a></span>&#160;<span class="preprocessor">#define sbi(sfr, bit) (_SFR_BYTE(sfr) |= _BV(bit))  // set bit</span></div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#aa5563d9f808ba53c2931ae3893329fff">  180</a></span>&#160;<span class="preprocessor">#define __CAT2(base, portname) base##portname // internally needed by CAT2</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a50662b943d631f365d6c7fe75b4781c8">  181</a></span>&#160;<span class="preprocessor">#define CAT2(prefix, num) __CAT2(prefix, num) // build a define name from 2 params</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a178d2b264dc2044e435cbed7ea2060bd">  182</a></span>&#160;<span class="preprocessor">#define __CAT3(prefix, num, postfix) prefix##num##postfix // internally needed by CAT3</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="IrWidget_8h.html#a2a4782fc6226837a52c9f2f42a79d103">  183</a></span>&#160;<span class="preprocessor">#define CAT3(prefix, num, postfix) __CAT3(prefix, num, postfix) // build a define name from 3 params</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// these macros are used to debug the timing with an logic analyzer or oscilloscope on a port pin</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classIrWidget.html#a6c7ef05e586f5d8e35c2da0369016691">  187</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#a6c7ef05e586f5d8e35c2da0369016691">debugPinToggle</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#if defined(DEBUG_PIN) &amp;&amp; defined(DEBUG_PORT)</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="IrWidget_8h.html#a50662b943d631f365d6c7fe75b4781c8">CAT2</a>(PIN, DEBUG_PORT) = _BV(DEBUG_PIN);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classIrWidget.html#aadab5427648c55b803127537c8c4e661">  193</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classIrWidget.html#aadab5427648c55b803127537c8c4e661">debugPinClear</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#if defined(DEBUG_PIN) &amp;&amp; defined(DEBUG_PORT)</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="IrWidget_8h.html#ae70baf5399951da1e7ad45a0ed890832">cbi</a>(<a class="code" href="IrWidget_8h.html#a50662b943d631f365d6c7fe75b4781c8">CAT2</a>(PORT, DEBUG_PORT), DEBUG_PIN);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classIrWidget.html#a1cafd808cd50961ea5aae15f8578bb10">  198</a></span>&#160;    uint16_t *<a class="code" href="classIrWidget.html#a1cafd808cd50961ea5aae15f8578bb10">captureData</a>; <span class="comment">//[bufSize]; // the buffer where the catured data is stored</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classIrWidget.html#a3ee5421476060a892ca845db0a8264e0">  199</a></span>&#160;    uint16_t <a class="code" href="classIrWidget.html#a3ee5421476060a892ca845db0a8264e0">captureCount</a>; <span class="comment">// number of values stored in captureData</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="classIrWidget.html#a3fab0fb695b1b397200dd7fef5655b25">  200</a></span>&#160;    <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classIrWidget.html#a3fab0fb695b1b397200dd7fef5655b25">sampleSize</a> = 2;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classIrWidget.html#aca3ef24d4335c14f359183b043823d49">  202</a></span>&#160;    <span class="keyword">virtual</span> uint32_t <a class="code" href="classIrWidget.html#aca3ef24d4335c14f359183b043823d49">unpackTimeVal</a>(uint32_t val) <span class="keyword">const</span> = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// convert number of clocks to nanoseconds, try to use integer arithmetic and avoid</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// overflow and too much truncation (double arithmetic costs additional 800 byte of code)</span></div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classIrWidget.html#a8b09fff5460ce629ebd40f363d2450fd">  206</a></span>&#160;    <span class="keyword">static</span> uint32_t <span class="keyword">inline</span> <a class="code" href="classIrWidget.html#a8b09fff5460ce629ebd40f363d2450fd">timerValueToNanoSeconds</a>(uint32_t x) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#if (F_CPU % 8000000) == 0</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> (x * (125UL &lt;&lt; <a class="code" href="IrWidget_8h.html#a1d3a98b2b25a58303852835b74d28a64">CAPTURE_PRESCALER_BITS</a>)) / (F_CPU / 8000000UL);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#elif (F_CPU % 1000000) == 0</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> (x * (1000UL &lt;&lt; <a class="code" href="IrWidget_8h.html#a1d3a98b2b25a58303852835b74d28a64">CAPTURE_PRESCALER_BITS</a>)) / (F_CPU / 1000000UL);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#elif (F_CPU % 115200) == 0 // serial bps rate compatible cpu clocks, e.g. 7372800 or 14745600</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">// TODO: this has to be tested, especially the accuracy</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">return</span> (((x * (1000UL &lt;&lt; <a class="code" href="IrWidget_8h.html#a1d3a98b2b25a58303852835b74d28a64">CAPTURE_PRESCALER_BITS</a>)) / (F_CPU / 115200UL)) * 625UL) / 72UL;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// TODO: this has to be tested</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">return</span> (uint32_t) (((double) x * (1.0E9 * (<span class="keywordtype">double</span>) <a class="code" href="IrWidget_8h.html#a49d47449ce09966c52ba5197725d05ec">CAPTURE_PRESCALER_FACTOR</a>)) / (double) F_CPU); <span class="comment">// use double precision floating point arithmetic</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassIrWidget_html"><div class="ttname"><a href="classIrWidget.html">IrWidget</a></div><div class="ttdoc">Base class for classes based upon ICP pins capture.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00044">IrWidget.h:44</a></div></div>
<div class="ttc" id="aIrWidget_8h_html_a49d47449ce09966c52ba5197725d05ec"><div class="ttname"><a href="IrWidget_8h.html#a49d47449ce09966c52ba5197725d05ec">CAPTURE_PRESCALER_FACTOR</a></div><div class="ttdeci">#define CAPTURE_PRESCALER_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00122">IrWidget.h:122</a></div></div>
<div class="ttc" id="aclassIrReader_html"><div class="ttname"><a href="classIrReader.html">IrReader</a></div><div class="ttdoc">Abstract base class for all IR readers, capturing or receiving.</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00030">IrReader.h:30</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a8b09fff5460ce629ebd40f363d2450fd"><div class="ttname"><a href="classIrWidget.html#a8b09fff5460ce629ebd40f363d2450fd">IrWidget::timerValueToNanoSeconds</a></div><div class="ttdeci">static uint32_t timerValueToNanoSeconds(uint32_t x)</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00206">IrWidget.h:206</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a615b8fb0466161aaf14f94cd89a85946"><div class="ttname"><a href="classIrWidget.html#a615b8fb0466161aaf14f94cd89a85946">IrWidget::capture</a></div><div class="ttdeci">virtual void capture()=0</div></div>
<div class="ttc" id="aclassIrWidget_html_a1cafd808cd50961ea5aae15f8578bb10"><div class="ttname"><a href="classIrWidget.html#a1cafd808cd50961ea5aae15f8578bb10">IrWidget::captureData</a></div><div class="ttdeci">uint16_t * captureData</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00198">IrWidget.h:198</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a09ca5209cface3e0121609b5c957a545"><div class="ttname"><a href="classIrWidget.html#a09ca5209cface3e0121609b5c957a545">IrWidget::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00082">IrWidget.h:82</a></div></div>
<div class="ttc" id="aclassIrWidget_html_aa8bb29845ad2933c1c957d1f088f3835"><div class="ttname"><a href="classIrWidget.html#aa8bb29845ad2933c1c957d1f088f3835">IrWidget::dump</a></div><div class="ttdeci">void dump(Stream &amp;stream) const</div><div class="ttdoc">Prints a textual representation of the received data to the Stream supplied.</div></div>
<div class="ttc" id="aInfraredTypes_8h_html_a5a4323547cf58895464e841b9b424384"><div class="ttname"><a href="InfraredTypes_8h.html#a5a4323547cf58895464e841b9b424384">microseconds_t</a></div><div class="ttdeci">uint16_t microseconds_t</div><div class="ttdoc">Type for durations in micro seconds.</div><div class="ttdef"><b>Definition:</b> <a href="InfraredTypes_8h_source.html#l00015">InfraredTypes.h:15</a></div></div>
<div class="ttc" id="aInfraredTypes_8h_html_a02e5a587d9560b431c944b1f71cdb898"><div class="ttname"><a href="InfraredTypes_8h.html#a02e5a587d9560b431c944b1f71cdb898">MICROSECONDS_T_MAX</a></div><div class="ttdeci">static constexpr microseconds_t MICROSECONDS_T_MAX</div><div class="ttdoc">Largest microseconds_t number possible.</div><div class="ttdef"><b>Definition:</b> <a href="InfraredTypes_8h_source.html#l00018">InfraredTypes.h:18</a></div></div>
<div class="ttc" id="aIrWidget_8h_html_a1d3a98b2b25a58303852835b74d28a64"><div class="ttname"><a href="IrWidget_8h.html#a1d3a98b2b25a58303852835b74d28a64">CAPTURE_PRESCALER_BITS</a></div><div class="ttdeci">#define CAPTURE_PRESCALER_BITS</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00117">IrWidget.h:117</a></div></div>
<div class="ttc" id="aclassIrReader_html_aa347d7724edfacca143a1d5b2e99b7cc"><div class="ttname"><a href="classIrReader.html#aa347d7724edfacca143a1d5b2e99b7cc">IrReader::defaultEndingTimeout</a></div><div class="ttdeci">static constexpr milliseconds_t defaultEndingTimeout</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00034">IrReader.h:34</a></div></div>
<div class="ttc" id="aclassIrReader_html_a6e59cf708a5d470e928b09ed19bd9744"><div class="ttname"><a href="classIrReader.html#a6e59cf708a5d470e928b09ed19bd9744">IrReader::beginningTimeout</a></div><div class="ttdeci">milliseconds_t beginningTimeout</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00038">IrReader.h:38</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a6fd29fbdb2188444cc75e142045c85d5"><div class="ttname"><a href="classIrWidget.html#a6fd29fbdb2188444cc75e142045c85d5">IrWidget::setEndingTimeout</a></div><div class="ttdeci">void setEndingTimeout(milliseconds_t timeout)</div><div class="ttdoc">Sets the ending timeout.</div></div>
<div class="ttc" id="aclassIrWidget_html_a6c7ef05e586f5d8e35c2da0369016691"><div class="ttname"><a href="classIrWidget.html#a6c7ef05e586f5d8e35c2da0369016691">IrWidget::debugPinToggle</a></div><div class="ttdeci">void debugPinToggle(void)</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00187">IrWidget.h:187</a></div></div>
<div class="ttc" id="aIrReader_8h_html"><div class="ttname"><a href="IrReader_8h.html">IrReader.h</a></div></div>
<div class="ttc" id="aclassIrReader_html_a5ed55a23db0dd9ae2f6ccfe107802e54"><div class="ttname"><a href="classIrReader.html#a5ed55a23db0dd9ae2f6ccfe107802e54">IrReader::markExcess</a></div><div class="ttdeci">int16_t markExcess</div><div class="ttdoc">Microseconds subtracted from pulses and added to gaps.</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00044">IrReader.h:44</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a0d01530870632c70b8f849898c5a6fb6"><div class="ttname"><a href="classIrWidget.html#a0d01530870632c70b8f849898c5a6fb6">IrWidget::defaultMarkExcess</a></div><div class="ttdeci">static constexpr int16_t defaultMarkExcess</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00046">IrWidget.h:46</a></div></div>
<div class="ttc" id="aInfraredTypes_8h_html_ace35cfd2245c700198afb856211d7bcd"><div class="ttname"><a href="InfraredTypes_8h.html#ace35cfd2245c700198afb856211d7bcd">milliseconds_t</a></div><div class="ttdeci">uint16_t milliseconds_t</div><div class="ttdoc">Type for durations in milli seconds.</div><div class="ttdef"><b>Definition:</b> <a href="InfraredTypes_8h_source.html#l00024">InfraredTypes.h:24</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a3ee5421476060a892ca845db0a8264e0"><div class="ttname"><a href="classIrWidget.html#a3ee5421476060a892ca845db0a8264e0">IrWidget::captureCount</a></div><div class="ttdeci">uint16_t captureCount</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00199">IrWidget.h:199</a></div></div>
<div class="ttc" id="aclassIrWidget_html_aacd912c2cb3b959886a52fb0280a54a8"><div class="ttname"><a href="classIrWidget.html#aacd912c2cb3b959886a52fb0280a54a8">IrWidget::~IrWidget</a></div><div class="ttdeci">virtual ~IrWidget()</div></div>
<div class="ttc" id="aclassIrWidget_html_a47d27f3b458e0e95d0887b4beb9b199f"><div class="ttname"><a href="classIrWidget.html#a47d27f3b458e0e95d0887b4beb9b199f">IrWidget::getFrequency</a></div><div class="ttdeci">frequency_t getFrequency() const</div><div class="ttdoc">Returns frequency of received signal.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00101">IrWidget.h:101</a></div></div>
<div class="ttc" id="aclassIrReader_html_aeafc4ae8ffe780bc0d8543d8c86db50d"><div class="ttname"><a href="classIrReader.html#aeafc4ae8ffe780bc0d8543d8c86db50d">IrReader::timeouted</a></div><div class="ttdeci">bool timeouted</div><div class="ttdoc">True if last receive ended with a timeout.</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00047">IrReader.h:47</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a78328d308ce6ff122810c96060d77fa6"><div class="ttname"><a href="classIrWidget.html#a78328d308ce6ff122810c96060d77fa6">IrWidget::isReady</a></div><div class="ttdeci">bool isReady() const</div><div class="ttdoc">Returns true if there is collected data.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00078">IrWidget.h:78</a></div></div>
<div class="ttc" id="aclassIrWidget_html_af6cd89de970e6476d50e33965d91d575"><div class="ttname"><a href="classIrWidget.html#af6cd89de970e6476d50e33965d91d575">IrWidget::getDataLength</a></div><div class="ttdeci">size_t getDataLength() const</div><div class="ttdoc">Returns the number of collected durations.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00074">IrWidget.h:74</a></div></div>
<div class="ttc" id="aclassIrReader_html_acb87b34a742322ab3202ab41a4a6945d"><div class="ttname"><a href="classIrReader.html#acb87b34a742322ab3202ab41a4a6945d">IrReader::isEmpty</a></div><div class="ttdeci">virtual bool isEmpty() const</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00141">IrReader.h:141</a></div></div>
<div class="ttc" id="aclassIrReader_html_ab048b0b98a743fb15efd19261b9a9dde"><div class="ttname"><a href="classIrReader.html#ab048b0b98a743fb15efd19261b9a9dde">IrReader::defaultBeginningTimeout</a></div><div class="ttdeci">static constexpr milliseconds_t defaultBeginningTimeout</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00033">IrReader.h:33</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a4afe9486ef7f21d095be040f68c50cd4"><div class="ttname"><a href="classIrWidget.html#a4afe9486ef7f21d095be040f68c50cd4">IrWidget::ovlBitsDataType</a></div><div class="ttdeci">uint8_t ovlBitsDataType</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00127">IrWidget.h:127</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a3fab0fb695b1b397200dd7fef5655b25"><div class="ttname"><a href="classIrWidget.html#a3fab0fb695b1b397200dd7fef5655b25">IrWidget::sampleSize</a></div><div class="ttdeci">static constexpr uint8_t sampleSize</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00200">IrWidget.h:200</a></div></div>
<div class="ttc" id="aclassIrWidget_html_aadab5427648c55b803127537c8c4e661"><div class="ttname"><a href="classIrWidget.html#aadab5427648c55b803127537c8c4e661">IrWidget::debugPinClear</a></div><div class="ttdeci">void debugPinClear(void)</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00193">IrWidget.h:193</a></div></div>
<div class="ttc" id="aBoard_8h_html"><div class="ttname"><a href="Board_8h.html">Board.h</a></div></div>
<div class="ttc" id="aclassIrWidget_html_ae391c1ef6f89a4bdaa88ad86e695705a"><div class="ttname"><a href="classIrWidget.html#ae391c1ef6f89a4bdaa88ad86e695705a">IrWidget::endingTimeout</a></div><div class="ttdeci">ovlBitsDataType endingTimeout</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00132">IrWidget.h:132</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a58943ced28becf9321b930854928d69c"><div class="ttname"><a href="classIrWidget.html#a58943ced28becf9321b930854928d69c">IrWidget::frequency</a></div><div class="ttdeci">frequency_t frequency</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00049">IrWidget.h:49</a></div></div>
<div class="ttc" id="aclassIrWidget_html_aca3ef24d4335c14f359183b043823d49"><div class="ttname"><a href="classIrWidget.html#aca3ef24d4335c14f359183b043823d49">IrWidget::unpackTimeVal</a></div><div class="ttdeci">virtual uint32_t unpackTimeVal(uint32_t val) const =0</div></div>
<div class="ttc" id="aclassIrWidget_html_ad05e90c6f30a7a8073a2a6042189bd15"><div class="ttname"><a href="classIrWidget.html#ad05e90c6f30a7a8073a2a6042189bd15">IrWidget::receive</a></div><div class="ttdeci">void receive()</div><div class="ttdoc">For compatibility with the receiver classes, receive is a synonym for capture.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00070">IrWidget.h:70</a></div></div>
<div class="ttc" id="aclassIrWidget_html_ac218cea65ffcbc5867f6c34d66d40259"><div class="ttname"><a href="classIrWidget.html#ac218cea65ffcbc5867f6c34d66d40259">IrWidget::getDuration</a></div><div class="ttdeci">microseconds_t getDuration(unsigned int i) const</div><div class="ttdoc">Returns the index-th duration, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00086">IrWidget.h:86</a></div></div>
<div class="ttc" id="aclassIrReader_html_a4810d1c2d4151e306446889bbaed955d"><div class="ttname"><a href="classIrReader.html#a4810d1c2d4151e306446889bbaed955d">IrReader::defaultCaptureLength</a></div><div class="ttdeci">static constexpr size_t defaultCaptureLength</div><div class="ttdef"><b>Definition:</b> <a href="IrReader_8h_source.html#l00035">IrReader.h:35</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a9559347546a5553a42ed99cd776f1c17"><div class="ttname"><a href="classIrWidget.html#a9559347546a5553a42ed99cd776f1c17">IrWidget::RANGE_EXTENSION_BITS</a></div><div class="ttdeci">static constexpr uint8_t RANGE_EXTENSION_BITS</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00130">IrWidget.h:130</a></div></div>
<div class="ttc" id="aIrWidget_8h_html_ae70baf5399951da1e7ad45a0ed890832"><div class="ttname"><a href="IrWidget_8h.html#ae70baf5399951da1e7ad45a0ed890832">cbi</a></div><div class="ttdeci">#define cbi(sfr, bit)</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00178">IrWidget.h:178</a></div></div>
<div class="ttc" id="aclassIrWidget_html_ae8b636dfda0fcdea0fb2b8d3879e345e"><div class="ttname"><a href="classIrWidget.html#ae8b636dfda0fcdea0fb2b8d3879e345e">IrWidget::getEndingTimeout</a></div><div class="ttdeci">milliseconds_t getEndingTimeout() const</div></div>
<div class="ttc" id="aIrWidget_8h_html_a50662b943d631f365d6c7fe75b4781c8"><div class="ttname"><a href="IrWidget_8h.html#a50662b943d631f365d6c7fe75b4781c8">CAT2</a></div><div class="ttdeci">#define CAT2(prefix, num)</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00181">IrWidget.h:181</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a399814d6fa81bdb4bbb0a5991a9e2b3a"><div class="ttname"><a href="classIrWidget.html#a399814d6fa81bdb4bbb0a5991a9e2b3a">IrWidget::IrWidget</a></div><div class="ttdeci">IrWidget(size_t captureLength=defaultCaptureLength, bool pullup=false, int16_t markExcess=defaultMarkExcess, milliseconds_t beginningTimeout=defaultBeginningTimeout, milliseconds_t endingTimeout=defaultEndingTimeout)</div></div>
<div class="ttc" id="aInfraredTypes_8h_html_ab35ca91fa7f5b34afafe58828ccf58db"><div class="ttname"><a href="InfraredTypes_8h.html#ab35ca91fa7f5b34afafe58828ccf58db">frequency_t</a></div><div class="ttdeci">uint32_t frequency_t</div><div class="ttdoc">Type for modulation frequency in Hz.</div><div class="ttdef"><b>Definition:</b> <a href="InfraredTypes_8h_source.html#l00031">InfraredTypes.h:31</a></div></div>
<div class="ttc" id="aclassIrWidget_html_a5c8198e8ffc290c8cc9b020f0362fc89"><div class="ttname"><a href="classIrWidget.html#a5c8198e8ffc290c8cc9b020f0362fc89">IrWidget::invertingSensor</a></div><div class="ttdeci">static const bool invertingSensor</div><div class="ttdoc">Set true means if sensor signal is inverted (low = signal on) (false has not been tested,...</div><div class="ttdef"><b>Definition:</b> <a href="IrWidget_8h_source.html#l00063">IrWidget.h:63</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 11 2021 10:34:33 for Infrared4Arduino by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
